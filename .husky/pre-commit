#!/usr/bin/env sh

# Exit on errors
set -e

# Run lint-staged on changed files
npx lint-staged

# Run project-wide checks
npm run lint
npm run typecheck
npm test
if [ -n "$SONAR_TOKEN" ]; then
  npx sonar-scanner -Dsonar.token=$SONAR_TOKEN
else
  npx sonar-scanner -Dsonar.scanner.skip=true
fi
